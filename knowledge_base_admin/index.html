<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechKnowledge - 后台管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#06b6d4',
                        secondary: '#6366f1',
                        accent: '#10b981',
                        dark: '#0f172a',
                        light: '#f8fafc',
                        success: '#10b981',
                        warning: '#f59e0b',
                        danger: '#ef4444',
                        info: '#3b82f6'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'gradient': 'gradient 8s ease infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(6, 182, 212, 0.5)' },
                            '100%': { boxShadow: '0 0 30px rgba(6, 182, 212, 0.8), 0 0 40px rgba(6, 182, 212, 0.5)' },
                        },
                        gradient: {
                            '0%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                            '100%': { backgroundPosition: '0% 50%' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .glass-effect {
                backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .text-gradient {
                background: linear-gradient(90deg, #06b6d4, #6366f1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            .bg-gradient-tech {
                background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
                background-size: 400% 400%;
                animation: gradient 8s ease infinite;
            }
            .sidebar-item {
                transition: all 0.3s ease;
            }
            .sidebar-item:hover {
                background: rgba(6, 182, 212, 0.1);
                border-left: 3px solid #06b6d4;
            }
            .sidebar-item.active {
                background: rgba(6, 182, 212, 0.2);
                border-left: 3px solid #06b6d4;
            }
            .card {
                background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
                border: 1px solid rgba(6, 182, 212, 0.1);
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }
            .card:hover {
                border-color: rgba(6, 182, 212, 0.3);
                transform: translateY(-2px);
                box-shadow: 0 10px 30px rgba(6, 182, 212, 0.1);
            }
            .form-input {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(6, 182, 212, 0.1);
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }
            .form-input:focus {
                border-color: #06b6d4;
                box-shadow: 0 0 20px rgba(6, 182, 212, 0.2);
                outline: none;
            }
            .btn-primary {
                background: linear-gradient(135deg, #06b6d4, #6366f1);
                background-size: 200% 200%;
                animation: gradient 3s ease infinite;
                transition: all 0.3s ease;
            }
            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
            }
            .btn-success {
                background: linear-gradient(135deg, #10b981, #059669);
                transition: all 0.3s ease;
            }
            .btn-success:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            }
            .btn-danger {
                background: linear-gradient(135deg, #ef4444, #dc2626);
                transition: all 0.3s ease;
            }
            .btn-danger:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
            }
            .btn-warning {
                background: linear-gradient(135deg, #f59e0b, #d97706);
                transition: all 0.3s ease;
            }
            .btn-warning:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
            }
            .modal {
                backdrop-filter: blur(10px);
                background: rgba(0, 0, 0, 0.5);
            }
            .table-row {
                transition: all 0.3s ease;
            }
            .table-row:hover {
                background: rgba(6, 182, 212, 0.05);
            }
            .badge {
                padding: 0.25rem 0.5rem;
                border-radius: 9999px;
                font-size: 0.75rem;
                font-weight: 600;
            }
            .badge-primary {
                background: rgba(6, 182, 212, 0.2);
                color: #06b6d4;
            }
            .badge-success {
                background: rgba(16, 185, 129, 0.2);
                color: #10b981;
            }
            .badge-warning {
                background: rgba(245, 158, 11, 0.2);
                color: #f59e0b;
            }
            .badge-danger {
                background: rgba(239, 68, 68, 0.2);
                color: #ef4444;
            }
            .toast {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                transition: all 0.3s ease;
                transform: translateX(100%);
            }
            .toast.show {
                transform: translateX(0);
            }
            .loading-spinner {
                border: 3px solid rgba(6, 182, 212, 0.1);
                border-radius: 50%;
                border-top: 3px solid #06b6d4;
                width: 24px;
                height: 24px;
                animation: spin 1s linear infinite;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        }
    </style>
</head>
<body class="bg-gradient-tech min-h-screen text-white font-inter">
    <div class="flex h-screen overflow-hidden">
        <!-- 侧边栏 -->
        <aside class="w-64 bg-dark/80 border-r border-gray-800 flex flex-col">
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center">
                        <i class="fa fa-shield text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gradient">TechKnowledge</h1>
                        <p class="text-xs text-gray-400">后台管理</p>
                    </div>
                </div>
            </div>

            <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
                <div class="sidebar-item active px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="dashboard">
                    <i class="fa fa-tachometer w-6 text-center mr-3 text-primary"></i>
                    <span>仪表盘</span>
                </div>
                <div class="sidebar-item px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="knowledge">
                    <i class="fa fa-book w-6 text-center mr-3 text-primary"></i>
                    <span>知识管理</span>
                </div>
                <div class="sidebar-item px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="categories">
                    <i class="fa fa-th-large w-6 text-center mr-3 text-primary"></i>
                    <span>分类管理</span>
                </div>
                <div class="sidebar-item px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="users">
                    <i class="fa fa-users w-6 text-center mr-3 text-primary"></i>
                    <span>用户管理</span>
                </div>
                <div class="sidebar-item px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="settings">
                    <i class="fa fa-cog w-6 text-center mr-3 text-primary"></i>
                    <span>系统设置</span>
                </div>
                <div class="sidebar-item px-4 py-3 rounded-lg flex items-center cursor-pointer" data-page="backup">
                    <i class="fa fa-database w-6 text-center mr-3 text-primary"></i>
                    <span>数据备份</span>
                </div>
            </nav>

            <div class="p-4 border-t border-gray-800">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center">
                            <span class="text-xs font-bold">AD</span>
                        </div>
                        <div>
                            <p class="text-sm font-medium">管理员</p>
                            <p class="text-xs text-gray-400">admin@example.com</p>
                        </div>
                    </div>
                    <button id="logoutBtn" class="text-gray-400 hover:text-white">
                        <i class="fa fa-sign-out"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="flex-1 overflow-y-auto">
            <!-- 顶部导航 -->
            <header class="bg-dark/80 border-b border-gray-800 p-4 flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button id="mobileMenuBtn" class="md:hidden text-gray-400 hover:text-white">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                    <h2 id="pageTitle" class="text-xl font-bold">仪表盘</h2>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="relative text-gray-400 hover:text-white">
                        <i class="fa fa-bell text-xl"></i>
                        <span class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center">3</span>
                    </button>
                    <div class="relative">
                        <button class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center">
                                <span class="text-xs font-bold">AD</span>
                            </div>
                            <span class="hidden md:inline text-sm font-medium">管理员</span>
                            <i class="fa fa-angle-down text-xs"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- 页面内容 -->
            <div class="p-6">
                <!-- 仪表盘页面 -->
                <div id="dashboardPage" class="page-content">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-400 text-sm font-medium">知识条目</h3>
                                <div class="w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center">
                                    <i class="fa fa-book text-primary"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold mb-1" id="statKnowledge">0</div>
                            <div class="text-xs text-success flex items-center">
                                <i class="fa fa-arrow-up mr-1"></i>
                                <span>12% 较上月</span>
                            </div>
                        </div>
                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-400 text-sm font-medium">知识分类</h3>
                                <div class="w-10 h-10 bg-secondary/20 rounded-lg flex items-center justify-center">
                                    <i class="fa fa-th-large text-secondary"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold mb-1" id="statCategories">0</div>
                            <div class="text-xs text-success flex items-center">
                                <i class="fa fa-arrow-up mr-1"></i>
                                <span>5% 较上月</span>
                            </div>
                        </div>
                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-400 text-sm font-medium">总浏览量</h3>
                                <div class="w-10 h-10 bg-accent/20 rounded-lg flex items-center justify-center">
                                    <i class="fa fa-eye text-accent"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold mb-1" id="statViews">0</div>
                            <div class="text-xs text-success flex items-center">
                                <i class="fa fa-arrow-up mr-1"></i>
                                <span>28% 较上月</span>
                            </div>
                        </div>
                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-400 text-sm font-medium">活跃用户</h3>
                                <div class="w-10 h-10 bg-warning/20 rounded-lg flex items-center justify-center">
                                    <i class="fa fa-users text-warning"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold mb-1" id="statUsers">0</div>
                            <div class="text-xs text-success flex items-center">
                                <i class="fa fa-arrow-up mr-1"></i>
                                <span>18% 较上月</span>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="font-bold">知识分类分布</h3>
                                <div class="flex space-x-2">
                                    <button class="text-xs px-3 py-1 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">本周</button>
                                    <button class="text-xs px-3 py-1 bg-primary/20 text-primary rounded-lg">本月</button>
                                    <button class="text-xs px-3 py-1 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">全年</button>
                                </div>
                            </div>
                            <div class="space-y-4" id="categoryChart">
                                <!-- 分类图表将通过JavaScript动态生成 -->
                            </div>
                        </div>

                        <div class="card rounded-xl p-6">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="font-bold">最近更新</h3>
                                <button class="text-primary hover:text-primary/80 text-sm">查看全部</button>
                            </div>
                            <div class="space-y-4" id="recentUpdates">
                                <!-- 最近更新将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-xl p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="font-bold">系统状态</h3>
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-success flex items-center">
                                    <i class="fa fa-check-circle mr-2"></i>
                                    运行正常
                                </span>
                                <span class="text-sm text-gray-400">最后备份: 2025-11-25</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-16 h-16 bg-success/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa fa-database text-2xl text-success"></i>
                                </div>
                                <h4 class="font-medium mb-1">数据存储</h4>
                                <p class="text-sm text-gray-400">已使用 12.5MB / 100MB</p>
                                <div class="w-full bg-gray-800 rounded-full h-2 mt-2">
                                    <div class="bg-success h-2 rounded-full" style="width: 12.5%"></div>
                                </div>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa fa-clock-o text-2xl text-primary"></i>
                                </div>
                                <h4 class="font-medium mb-1">运行时间</h4>
                                <p class="text-sm text-gray-400">365 天</p>
                                <div class="text-xs text-gray-500 mt-2">上次重启: 2024-11-25</div>
                            </div>
                            <div class="text-center">
                                <div class="w-16 h-16 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa fa-shield text-2xl text-warning"></i>
                                </div>
                                <h4 class="font-medium mb-1">安全状态</h4>
                                <p class="text-sm text-gray-400">无安全风险</p>
                                <div class="text-xs text-gray-500 mt-2">上次扫描: 今天</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 知识管理页面 -->
                <div id="knowledgePage" class="page-content hidden">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold mb-2">知识管理</h3>
                            <p class="text-gray-400">管理所有知识条目，包括添加、编辑和删除</p>
                        </div>
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mt-4 md:mt-0">
                            <div class="relative">
                                <input type="text" id="knowledgeSearch" 
                                       class="form-input pl-10 pr-4 py-2 rounded-lg w-full sm:w-64"
                                       placeholder="搜索知识...">
                                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <button id="addKnowledgeBtn" class="btn-primary px-4 py-2 rounded-lg font-medium flex items-center justify-center">
                                <i class="fa fa-plus mr-2"></i>
                                添加知识
                            </button>
                        </div>
                    </div>

                    <div class="card rounded-xl p-6 mb-6">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-800">
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">ID</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">标题</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">分类</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">日期</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">浏览量</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">状态</th>
                                        <th class="text-right py-3 px-4 font-medium text-gray-400">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="knowledgeTableBody">
                                    <!-- 知识表格内容将通过JavaScript动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-400">
                            显示 <span id="showingFrom">1</span>-<span id="showingTo">10</span> 条，共 <span id="totalItems">0</span> 条
                        </div>
                        <div class="flex space-x-2" id="pagination">
                            <!-- 分页控件将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 分类管理页面 -->
                <div id="categoriesPage" class="page-content hidden">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold mb-2">分类管理</h3>
                            <p class="text-gray-400">管理知识分类，包括添加、编辑和删除</p>
                        </div>
                        <button id="addCategoryBtn" class="btn-primary px-4 py-2 rounded-lg font-medium flex items-center justify-center mt-4 md:mt-0">
                            <i class="fa fa-plus mr-2"></i>
                            添加分类
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6" id="categoriesGrid">
                        <!-- 分类卡片将通过JavaScript动态生成 -->
                    </div>
                </div>

                <!-- 用户管理页面 -->
                <div id="usersPage" class="page-content hidden">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6">
                        <div>
                            <h3 class="text-2xl font-bold mb-2">用户管理</h3>
                            <p class="text-gray-400">管理系统用户，包括查看、编辑和删除</p>
                        </div>
                        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mt-4 md:mt-0">
                            <div class="relative">
                                <input type="text" id="userSearch" 
                                       class="form-input pl-10 pr-4 py-2 rounded-lg w-full sm:w-64"
                                       placeholder="搜索用户...">
                                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <button id="addUserBtn" class="btn-primary px-4 py-2 rounded-lg font-medium flex items-center justify-center">
                                <i class="fa fa-plus mr-2"></i>
                                添加用户
                            </button>
                        </div>
                    </div>

                    <div class="card rounded-xl p-6 mb-6">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-800">
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">ID</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">用户名</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">邮箱</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">角色</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">注册日期</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">状态</th>
                                        <th class="text-right py-3 px-4 font-medium text-gray-400">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <!-- 用户表格内容将通过JavaScript动态生成 -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-400">
                            显示 <span id="usersShowingFrom">1</span>-<span id="usersShowingTo">10</span> 条，共 <span id="totalUsers">0</span> 条
                        </div>
                        <div class="flex space-x-2" id="usersPagination">
                            <!-- 分页控件将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 系统设置页面 -->
                <div id="settingsPage" class="page-content hidden">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-2">系统设置</h3>
                        <p class="text-gray-400">配置系统的基本参数和选项</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 space-y-6">
                            <div class="card rounded-xl p-6">
                                <h4 class="font-bold mb-4">基本设置</h4>
                                <form id="generalSettingsForm" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">网站名称</label>
                                            <input type="text" id="siteName" value="TechKnowledge"
                                                   class="form-input w-full px-4 py-2 rounded-lg text-white">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">网站标题</label>
                                            <input type="text" id="siteTitle" value="科技知识库"
                                                   class="form-input w-full px-4 py-2 rounded-lg text-white">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">网站描述</label>
                                        <textarea id="siteDescription" rows="3"
                                                  class="form-input w-full px-4 py-2 rounded-lg text-white">一个集科技、编程、人工智能等前沿知识于一体的知识库，助你快速掌握最新技术动态</textarea>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">语言</label>
                                            <select id="siteLanguage" class="form-input w-full px-4 py-2 rounded-lg text-white">
                                                <option value="zh-CN">中文</option>
                                                <option value="en-US">英文</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">时区</label>
                                            <select id="siteTimezone" class="form-input w-full px-4 py-2 rounded-lg text-white">
                                                <option value="Asia/Shanghai">Asia/Shanghai</option>
                                                <option value="UTC">UTC</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                                            保存设置
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <div class="card rounded-xl p-6">
                                <h4 class="font-bold mb-4">主题设置</h4>
                                <form id="themeSettingsForm" class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">主题模式</label>
                                        <div class="flex space-x-4">
                                            <label class="flex items-center">
                                                <input type="radio" name="themeMode" value="dark" checked class="mr-2">
                                                <span>深色模式</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="themeMode" value="light" class="mr-2">
                                                <span>浅色模式</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="themeMode" value="auto" class="mr-2">
                                                <span>自动切换</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">主色调</label>
                                            <input type="color" id="primaryColor" value="#06b6d4"
                                                   class="w-full h-10 rounded-lg cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">辅助色</label>
                                            <input type="color" id="secondaryColor" value="#6366f1"
                                                   class="w-full h-10 rounded-lg cursor-pointer">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">强调色</label>
                                            <input type="color" id="accentColor" value="#10b981"
                                                   class="w-full h-10 rounded-lg cursor-pointer">
                                        </div>
                                    </div>
                                    <div class="flex justify-end">
                                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                                            应用主题
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="card rounded-xl p-6">
                                <h4 class="font-bold mb-4">安全设置</h4>
                                <form id="securitySettingsForm" class="space-y-4">
                                    <div>
                                        <label class="flex items-center justify-between text-sm font-medium text-gray-300">
                                            <span>启用登录验证</span>
                                            <input type="checkbox" id="enableLogin" checked class="rounded text-primary focus:ring-primary">
                                        </label>
                                    </div>
                                    <div>
                                        <label class="flex items-center justify-between text-sm font-medium text-gray-300">
                                            <span>启用IP限制</span>
                                            <input type="checkbox" id="enableIPRestriction" class="rounded text-primary focus:ring-primary">
                                        </label>
                                    </div>
                                    <div>
                                        <label class="flex items-center justify-between text-sm font-medium text-gray-300">
                                            <span>启用审计日志</span>
                                            <input type="checkbox" id="enableAuditLog" checked class="rounded text-primary focus:ring-primary">
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">会话超时时间 (分钟)</label>
                                        <input type="number" id="sessionTimeout" value="30" min="5" max="120"
                                               class="form-input w-full px-4 py-2 rounded-lg text-white">
                                    </div>
                                    <div class="flex justify-end">
                                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                                            保存安全设置
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <div class="card rounded-xl p-6">
                                <h4 class="font-bold mb-4">系统信息</h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">系统版本</span>
                                        <span>v1.0.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">最后更新</span>
                                        <span>2025-11-25</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">数据版本</span>
                                        <span>v1.0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-400">支持浏览器</span>
                                        <span>Chrome, Firefox, Safari</span>
                                    </div>
                                    <div class="mt-4 pt-4 border-t border-gray-800">
                                        <button id="checkUpdateBtn" class="w-full btn-primary px-4 py-2 rounded-lg font-medium text-center">
                                            检查更新
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据备份页面 -->
                <div id="backupPage" class="page-content hidden">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold mb-2">数据备份与恢复</h3>
                        <p class="text-gray-400">管理系统数据的备份和恢复操作</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="card rounded-xl p-6">
                            <h4 class="font-bold mb-4">创建备份</h4>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-800/50 rounded-lg">
                                    <h5 class="font-medium mb-2">备份内容</h5>
                                    <div class="space-y-2 text-sm">
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="mr-2">
                                            <span>知识条目数据</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="mr-2">
                                            <span>分类数据</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" checked class="mr-2">
                                            <span>用户数据</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" class="mr-2">
                                            <span>系统设置</span>
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">备份名称</label>
                                    <input type="text" id="backupName" value="backup_20251125"
                                           class="form-input w-full px-4 py-2 rounded-lg text-white">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">备份描述</label>
                                    <textarea id="backupDescription" rows="2"
                                              class="form-input w-full px-4 py-2 rounded-lg text-white">定期系统备份</textarea>
                                </div>
                                <div class="flex justify-end">
                                    <button id="createBackupBtn" class="btn-primary px-6 py-2 rounded-lg font-medium">
                                        <i class="fa fa-download mr-2"></i>
                                        创建并下载备份
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="card rounded-xl p-6">
                            <h4 class="font-bold mb-4">恢复数据</h4>
                            <div class="space-y-4">
                                <div class="p-4 bg-warning/20 rounded-lg border border-warning/30">
                                    <div class="flex items-start">
                                        <i class="fa fa-exclamation-triangle text-warning mr-3 mt-1"></i>
                                        <div>
                                            <h5 class="font-medium text-warning mb-1">警告</h5>
                                            <p class="text-sm text-gray-300">恢复操作将覆盖当前系统的所有数据，请确保已创建最新备份。</p>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">上传备份文件</label>
                                    <div class="border-2 border-dashed border-gray-700 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer" id="dropZone">
                                        <i class="fa fa-cloud-upload text-3xl text-gray-400 mb-2"></i>
                                        <p class="text-sm text-gray-400 mb-2">拖放文件到此处或</p>
                                        <button class="text-primary hover:text-primary/80">浏览文件</button>
                                        <input type="file" id="backupFile" accept=".json" class="hidden">
                                    </div>
                                </div>
                                <div id="fileInfo" class="hidden">
                                    <div class="p-3 bg-gray-800 rounded-lg flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fa fa-file-text-o text-primary mr-2"></i>
                                            <div>
                                                <p id="fileName" class="text-sm font-medium"></p>
                                                <p id="fileSize" class="text-xs text-gray-400"></p>
                                            </div>
                                        </div>
                                        <button id="removeFileBtn" class="text-danger hover:text-danger/80">
                                            <i class="fa fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex justify-end">
                                    <button id="restoreBackupBtn" class="btn-warning px-6 py-2 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                        <i class="fa fa-upload mr-2"></i>
                                        恢复数据
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card rounded-xl p-6">
                        <h4 class="font-bold mb-4">备份历史</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-800">
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">备份名称</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">日期</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">大小</th>
                                        <th class="text-left py-3 px-4 font-medium text-gray-400">状态</th>
                                        <th class="text-right py-3 px-4 font-medium text-gray-400">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="backupHistoryTable">
                                    <tr class="table-row border-b border-gray-800">
                                        <td class="py-3 px-4">
                                            <div class="flex items-center">
                                                <i class="fa fa-database text-primary mr-2"></i>
                                                <span>backup_20251125</span>
                                            </div>
                                        </td>
                                        <td class="py-3 px-4 text-gray-400">2025-11-25 14:30</td>
                                        <td class="py-3 px-4 text-gray-400">12.5 MB</td>
                                        <td class="py-3 px-4">
                                            <span class="badge badge-success">完成</span>
                                        </td>
                                        <td class="py-3 px-4 text-right">
                                            <button class="text-primary hover:text-primary/80 mr-2">
                                                <i class="fa fa-download"></i>
                                            </button>
                                            <button class="text-danger hover:text-danger/80">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="table-row border-b border-gray-800">
                                        <td class="py-3 px-4">
                                            <div class="flex items-center">
                                                <i class="fa fa-database text-primary mr-2"></i>
                                                <span>backup_20251120</span>
                                            </div>
                                        </td>
                                        <td class="py-3 px-4 text-gray-400">2025-11-20 09:15</td>
                                        <td class="py-3 px-4 text-gray-400">11.8 MB</td>
                                        <td class="py-3 px-4">
                                            <span class="badge badge-success">完成</span>
                                        </td>
                                        <td class="py-3 px-4 text-right">
                                            <button class="text-primary hover:text-primary/80 mr-2">
                                                <i class="fa fa-download"></i>
                                            </button>
                                            <button class="text-danger hover:text-danger/80">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr class="table-row">
                                        <td class="py-3 px-4">
                                            <div class="flex items-center">
                                                <i class="fa fa-database text-primary mr-2"></i>
                                                <span>backup_20251115</span>
                                            </div>
                                        </td>
                                        <td class="py-3 px-4 text-gray-400">2025-11-15 16:45</td>
                                        <td class="py-3 px-4 text-gray-400">10.2 MB</td>
                                        <td class="py-3 px-4">
                                            <span class="badge badge-success">完成</span>
                                        </td>
                                        <td class="py-3 px-4 text-right">
                                            <button class="text-primary hover:text-primary/80 mr-2">
                                                <i class="fa fa-download"></i>
                                            </button>
                                            <button class="text-danger hover:text-danger/80">
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 添加知识模态框 -->
    <div id="addKnowledgeModal" class="modal fixed inset-0 hidden items-center justify-center p-6 z-50">
        <div class="card rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-800">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold" id="modalTitle">添加知识</h3>
                    <button id="closeKnowledgeModal" class="text-gray-400 hover:text-white">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="knowledgeForm" class="space-y-6">
                    <input type="hidden" id="knowledgeId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">标题 <span class="text-danger">*</span></label>
                            <input type="text" id="knowledgeTitle" required
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="请输入知识标题">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">分类 <span class="text-danger">*</span></label>
                            <select id="knowledgeCategory" required
                                    class="form-input w-full px-4 py-2 rounded-lg text-white">
                                <option value="">请选择分类</option>
                                <!-- 分类选项将通过JavaScript动态生成 -->
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">内容 <span class="text-danger">*</span></label>
                        <div class="border border-gray-700 rounded-lg overflow-hidden">
                            <div class="flex border-b border-gray-700">
                                <button type="button" class="editor-tab active px-4 py-2 text-sm font-medium" data-mode="editor">
                                    编辑器
                                </button>
                                <button type="button" class="editor-tab px-4 py-2 text-sm font-medium text-gray-400" data-mode="preview">
                                    预览
                                </button>
                            </div>
                            <textarea id="knowledgeContent" rows="10" required
                                      class="form-input w-full px-4 py-3 rounded-b-lg text-white border-0 focus:ring-0"
                                      placeholder="请输入知识内容（支持HTML格式）"></textarea>
                            <div id="contentPreview" class="hidden p-4 bg-gray-900 rounded-b-lg min-h-[300px]"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">发布日期</label>
                            <input type="date" id="knowledgeDate"
                                   class="form-input w-full px-4 py-2 rounded-lg text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">标签</label>
                            <input type="text" id="knowledgeTags"
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="用逗号分隔多个标签">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">状态</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="knowledgeStatus" value="published" checked class="mr-2">
                                    <span>已发布</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="knowledgeStatus" value="draft" class="mr-2">
                                    <span>草稿</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelKnowledgeBtn" class="px-6 py-2 rounded-lg font-medium border border-gray-700 hover:bg-gray-800 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                            <i class="fa fa-save mr-2"></i>
                            保存知识
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 添加分类模态框 -->
    <div id="addCategoryModal" class="modal fixed inset-0 hidden items-center justify-center p-6 z-50">
        <div class="card rounded-2xl max-w-md w-full">
            <div class="p-6 border-b border-gray-800">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold" id="categoryModalTitle">添加分类</h3>
                    <button id="closeCategoryModal" class="text-gray-400 hover:text-white">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="categoryForm" class="space-y-6">
                    <input type="hidden" id="categoryId">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">分类名称 <span class="text-danger">*</span></label>
                        <input type="text" id="categoryName" required
                               class="form-input w-full px-4 py-2 rounded-lg text-white"
                               placeholder="请输入分类名称">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">图标</label>
                        <div class="flex items-center space-x-3">
                            <input type="text" id="categoryIcon" 
                                   class="form-input flex-1 px-4 py-2 rounded-lg text-white"
                                   placeholder="例如: fa fa-book" value="fa fa-book">
                            <div class="w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center">
                                <i id="iconPreview" class="fa fa-book text-primary text-xl"></i>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">颜色</label>
                        <div class="flex items-center space-x-3">
                            <input type="color" id="categoryColor" value="#06b6d4"
                                   class="w-full h-10 rounded-lg cursor-pointer">
                            <div class="w-10 h-10 rounded-lg" id="colorPreview" style="background-color: #06b6d4"></div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">描述</label>
                        <textarea id="categoryDescription" rows="3"
                                  class="form-input w-full px-4 py-2 rounded-lg text-white"
                                  placeholder="请输入分类描述"></textarea>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelCategoryBtn" class="px-6 py-2 rounded-lg font-medium border border-gray-700 hover:bg-gray-800 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                            <i class="fa fa-save mr-2"></i>
                            保存分类
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 添加用户模态框 -->
    <div id="addUserModal" class="modal fixed inset-0 hidden items-center justify-center p-6 z-50">
        <div class="card rounded-2xl max-w-md w-full">
            <div class="p-6 border-b border-gray-800">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold" id="userModalTitle">添加用户</h3>
                    <button id="closeUserModal" class="text-gray-400 hover:text-white">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="userForm" class="space-y-6">
                    <input type="hidden" id="userId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">用户名 <span class="text-danger">*</span></label>
                            <input type="text" id="userUsername" required
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="请输入用户名">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">邮箱 <span class="text-danger">*</span></label>
                            <input type="email" id="userEmail" required
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="请输入邮箱">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">密码 <span class="text-danger">*</span></label>
                            <input type="password" id="userPassword" required
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="请输入密码">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">确认密码 <span class="text-danger">*</span></label>
                            <input type="password" id="userConfirmPassword" required
                                   class="form-input w-full px-4 py-2 rounded-lg text-white"
                                   placeholder="请确认密码">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">角色 <span class="text-danger">*</span></label>
                        <select id="userRole" required
                                class="form-input w-full px-4 py-2 rounded-lg text-white">
                            <option value="admin">管理员</option>
                            <option value="editor">编辑</option>
                            <option value="viewer">查看者</option>
                        </select>
                    </div>
                    <div>
                        <label class="flex items-center justify-between text-sm font-medium text-gray-300">
                            <span>状态</span>
                            <input type="checkbox" id="userStatus" checked class="rounded text-primary focus:ring-primary">
                        </label>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancelUserBtn" class="px-6 py-2 rounded-lg font-medium border border-gray-700 hover:bg-gray-800 transition-colors">
                            取消
                        </button>
                        <button type="submit" class="btn-primary px-6 py-2 rounded-lg font-medium">
                            <i class="fa fa-save mr-2"></i>
                            保存用户
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 确认对话框 -->
    <div id="confirmDialog" class="modal fixed inset-0 hidden items-center justify-center p-6 z-50">
        <div class="card rounded-2xl max-w-md w-full">
            <div class="p-6">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-warning/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-exclamation-triangle text-2xl text-warning"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2" id="confirmTitle">确认操作</h3>
                    <p class="text-gray-400" id="confirmMessage">您确定要执行此操作吗？</p>
                </div>
                <div class="flex justify-center space-x-3">
                    <button id="confirmCancel" class="px-6 py-2 rounded-lg font-medium border border-gray-700 hover:bg-gray-800 transition-colors">
                        取消
                    </button>
                    <button id="confirmOk" class="btn-danger px-6 py-2 rounded-lg font-medium">
                        确认
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 提示框 -->
    <div id="toast" class="toast p-4 rounded-lg glass-effect max-w-sm">
        <div class="flex items-center">
            <i id="toastIcon" class="fa fa-check-circle text-success mr-3"></i>
            <div>
                <p id="toastMessage" class="font-medium"></p>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        let knowledgeData = {
            categories: [],
            knowledge: [],
            users: [],
            statistics: {}
        };
        let currentPage = 'dashboard';
        let currentEditingId = null;
        let confirmCallback = null;

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 检查登录状态
            if (!sessionStorage.getItem('isLoggedIn')) {
                window.location.href = 'login.html';
                return;
            }

            // 加载数据
            loadData();
            
            // 初始化界面
            initializeUI();
            
            // 初始化事件监听器
            initializeEventListeners();
        });

        // 加载数据
        function loadData() {
            // 从JSON文件加载数据（实际项目中应该从服务器API获取）
            // 这里使用模拟数据
            knowledgeData = {
                categories: [
                    { id: 1, name: "人工智能", icon: "fa fa-robot", color: "#06b6d4", description: "人工智能领域的知识和技术", count: 24 },
                    { id: 2, name: "编程开发", icon: "fa fa-code", color: "#6366f1", description: "各种编程语言和开发技术", count: 32 },
                    { id: 3, name: "云计算", icon: "fa fa-cloud", color: "#10b981", description: "云计算平台和服务", count: 18 },
                    { id: 4, name: "大数据", icon: "fa fa-database", color: "#f59e0b", description: "大数据处理和分析技术", count: 21 },
                    { id: 5, name: "网络安全", icon: "fa fa-shield", color: "#ef4444", description: "网络安全防护技术", count: 16 },
                    { id: 6, name: "区块链", icon: "fa fa-link", color: "#8b5cf6", description: "区块链技术和应用", count: 14 },
                    { id: 7, name: "移动开发", icon: "fa fa-mobile", color: "#ec4899", description: "移动应用开发技术", count: 28 },
                    { id: 8, name: "前端技术", icon: "fa fa-desktop", color: "#3b82f6", description: "前端开发框架和技术", count: 35 }
                ],
                knowledge: [
                    {
                        id: 1,
                        title: "人工智能大模型发展趋势",
                        category: "人工智能",
                        content: "<p>人工智能大模型是当前AI领域最热门的技术方向之一，具有以下发展趋势：</p><ul><li><strong>多模态融合</strong> - 文本、图像、音频、视频等多种数据类型的深度融合</li><li><strong>轻量化部署</strong> - 模型压缩和优化，使其能够在边缘设备上运行</li><li><strong>垂直领域深化</strong> - 在医疗、金融、教育等特定领域的专业应用</li><li><strong>可解释性增强</strong> - 提高模型决策的透明度和可解释性</li><li><strong>自主学习能力</strong> - 模型能够自主学习和适应新的任务和环境</li></ul><p>大模型技术的发展将深刻改变各行各业的工作方式和商业模式，为社会带来巨大的价值。</p>",
                        date: "2025-11-15",
                        views: 12450,
                        likes: 892,
                        trending: true,
                        newest: true,
                        tags: ["AI", "大模型", "机器学习", "深度学习"],
                        status: "published"
                    },
                    {
                        id: 2,
                        title: "现代前端开发技术栈",
                        category: "前端技术",
                        content: "<p>现代前端开发已经发展成为一个复杂而成熟的技术体系，主要包括以下核心技术：</p><h4>核心框架</h4><ul><li><strong>React</strong> - Facebook开发的组件化UI库</li><li><strong>Vue.js</strong> - 渐进式JavaScript框架</li><li><strong>Angular</strong> - Google开发的完整框架</li></ul><h4>构建工具</h4><ul><li><strong>Vite</strong> - 下一代前端构建工具</li><li><strong>Webpack</strong> - 模块打包工具</li><li><strong>Rollup</strong> - 高效的ES模块打包器</li></ul><h4>样式解决方案</h4><ul><li><strong>Tailwind CSS</strong> - 实用优先的CSS框架</li><li><strong>Sass/Less</strong> - CSS预处理器</li><li><strong>CSS Modules</strong> - 模块化CSS</li></ul><p>现代前端开发强调组件化、响应式设计和性能优化，为用户提供更好的体验。</p>",
                        date: "2025-11-20",
                        views: 8760,
                        likes: 654,
                        trending: true,
                        newest: false,
                        tags: ["前端", "JavaScript", "React", "Vue", "开发"]
                    },
                    {
                        id: 3,
                        title: "云计算架构设计最佳实践",
                        category: "云计算",
                        content: "<p>云计算架构设计需要考虑多个方面，包括可扩展性、可靠性、安全性和成本效益。以下是一些最佳实践：</p><h4>架构原则</h4><ul><li><strong>微服务架构</strong> - 将应用拆分为小型、独立的服务</li><li><strong>无服务器架构</strong> - 使用FaaS(Function as a Service)减少运维负担</li><li><strong>容器化部署</strong> - 使用Docker和Kubernetes实现环境一致性</li></ul><h4>安全考虑</h4><ul><li><strong>零信任安全模型</strong> - 不信任任何内部或外部的请求</li><li><strong>数据加密</strong> - 传输中和静态数据的加密保护</li><li><strong>身份认证和授权</strong> - 细粒度的访问控制</li></ul><h4>性能优化</h4><ul><li><strong>CDN加速</strong> - 全球内容分发网络</li><li><strong>缓存策略</strong> - 多级缓存提高响应速度</li><li><strong>负载均衡</strong> - 分布式负载处理</li></ul><p>良好的云计算架构设计能够支持业务的快速发展，并提供可靠的服务质量。</p>",
                        date: "2025-11-10",
                        views: 6320,
                        likes: 421,
                        trending: false,
                        newest: false,
                        tags: ["云计算", "架构", "AWS", "Azure", "GCP"]
                    },
                    {
                        id: 4,
                        title: "Python数据分析生态系统",
                        category: "编程开发",
                        content: "<p>Python已经成为数据分析领域的首选语言，拥有丰富的库和工具生态系统：</p><h4>数据处理</h4><ul><li><strong>Pandas</strong> - 数据处理和分析的核心库</li><li><strong>Numpy</strong> - 数值计算基础库</li><li><strong>Dask</strong> - 并行计算库，处理大规模数据</li></ul><h4>可视化</h4><ul><li><strong>Matplotlib</strong> - 基础绘图库</li><li><strong>Seaborn</strong> - 统计数据可视化</li><li><strong>Plotly</strong> - 交互式可视化</li><li><strong>Altair</strong> - 声明式可视化库</li></ul><h4>机器学习</h4><ul><li><strong>Scikit-learn</strong> - 机器学习算法库</li><li><strong>TensorFlow/PyTorch</strong> - 深度学习框架</li><li><strong>XGBoost/LightGBM</strong> - 梯度提升算法</li></ul><h4>大数据处理</h4><ul><li><strong>PySpark</strong> - Spark的Python API</li><li><strong>Dask</strong> - 并行计算库</li></ul><p>Python数据分析生态系统的丰富性和易用性使其成为数据科学家和分析师的首选工具。</p>",
                        date: "2025-11-25",
                        views: 9870,
                        likes: 732,
                        trending: true,
                        newest: true,
                        tags: ["Python", "数据分析", "Pandas", "机器学习", "数据科学"]
                    },
                    {
                        id: 5,
                        title: "网络安全防护体系建设",
                        category: "网络安全",
                        content: "<p>网络安全防护体系是一个多层次、全方位的安全保障系统，包括以下关键组件：</p><h4>边界防护</h4><ul><li><strong>防火墙</strong> - 网络流量过滤和访问控制</li><li><strong>入侵检测/防御系统(IDS/IPS)</strong> - 实时威胁检测和阻断</li><li><strong>VPN</strong> - 安全的远程访问</li></ul><h4>终端安全</h4><ul><li><strong>防病毒软件</strong> - 恶意软件检测和清除</li><li><strong>终端检测与响应(EDR)</strong> - 高级威胁检测</li><li><strong>应用白名单</strong> - 控制可执行程序</li></ul><h4>数据安全</h4><ul><li><strong>加密技术</strong> - 数据加密和密钥管理</li><li><strong>数据防泄漏(DLP)</strong> - 防止敏感数据外泄</li><li><strong>备份与恢复</strong> - 数据备份和灾难恢复</li></ul><h4>安全管理</h4><ul><li><strong>安全信息与事件管理(SIEM)</strong> - 集中式安全监控</li><li><strong>漏洞管理</strong> - 定期漏洞扫描和修复</li><li><strong>安全培训</strong> - 员工安全意识教育</li></ul><p>一个完善的网络安全防护体系能够有效抵御各种网络威胁，保护组织的信息资产安全。</p>",
                        date: "2025-11-05",
                        views: 5430,
                        likes: 389,
                        trending: false,
                        newest: false,
                        tags: ["网络安全", "防护", "防火墙", "加密", "安全管理"]
                    },
                    {
                        id: 6,
                        title: "区块链技术应用与发展",
                        category: "区块链",
                        content: "<p>区块链技术已经从加密货币扩展到多个领域，具有广泛的应用前景：</p><h4>金融领域</h4><ul><li><strong>跨境支付</strong> - 快速、低成本的国际汇款</li><li><strong>供应链金融</strong> - 基于区块链的贸易融资</li><li><strong>数字资产</strong> - 证券化代币和数字证券</li></ul><h4>供应链管理</h4><ul><li><strong>产品溯源</strong> - 从生产到消费的全程追踪</li><li><strong>智能合约</strong> - 自动化的合同执行</li><li><strong>库存管理</strong> - 透明的库存跟踪</li></ul><h4>公共服务</h4><ul><li><strong>身份认证</strong> - 去中心化的身份管理</li><li><strong>电子政务</strong> - 透明、高效的政府服务</li><li><strong>投票系统</strong> - 安全、可信的电子投票</li></ul><h4>技术发展趋势</h4><ul><li><strong>Layer 2解决方案</strong> - 提高交易速度和降低成本</li><li><strong>跨链技术</strong> - 不同区块链之间的互操作性</li><li><strong>隐私保护</strong> - 零知识证明等隐私技术</li></ul><p>区块链技术的去中心化、透明性和不可篡改性使其在多个领域具有巨大的应用潜力。</p>",
                        date: "2025-11-18",
                        views: 7650,
                        likes: 543,
                        trending: true,
                        newest: false,
                        tags: ["区块链", "加密货币", "智能合约", "NFT", "Web3"]
                    },
                    {
                        id: 7,
                        title: "移动应用开发最佳实践",
                        category: "移动开发",
                        content: "<p>移动应用开发需要考虑用户体验、性能、安全性等多个方面，以下是一些最佳实践：</p><h4>用户体验设计</h4><ul><li><strong>响应式设计</strong> - 适配不同屏幕尺寸</li><li><strong>直观导航</strong> - 简单明了的用户界面</li><li><strong>触控优化</strong> - 适合手指操作的控件大小</li></ul><h4>性能优化</h4><ul><li><strong>启动速度</strong> - 减少启动时间</li><li><strong>内存管理</strong> - 优化内存使用</li><li><strong>网络优化</strong> - 减少网络请求和数据传输</li></ul><h4>安全考虑</h4><ul><li><strong>数据加密</strong> - 敏感数据的加密存储</li><li><strong>安全认证</strong> - 强身份验证机制</li><li><strong>代码混淆</strong> - 防止逆向工程</li></ul><h4>开发技术</h4><ul><li><strong>原生开发</strong> - Swift/Objective-C (iOS), Kotlin/Java (Android)</li><li><strong>跨平台开发</strong> - Flutter, React Native, Xamarin</li><li><strong>混合开发</strong> - Cordova, Ionic</li></ul><p>优秀的移动应用开发需要平衡功能、性能和用户体验，为用户提供流畅的使用体验。</p>",
                        date: "2025-11-22",
                        views: 4890,
                        likes: 321,
                        trending: false,
                        newest: true,
                        tags: ["移动开发", "iOS", "Android", "Flutter", "React Native"]
                    },
                    {
                        id: 8,
                        title: "DevOps实践指南",
                        category: "编程开发",
                        content: "<p>DevOps是开发(Development)和运维(Operations)的结合，旨在提高软件交付的速度和质量。以下是DevOps实践的核心要素：</p><h4>文化理念</h4><ul><li><strong>协作文化</strong> - 开发和运维团队的紧密合作</li><li><strong>持续改进</strong> - 不断优化流程和工具</li><li><strong>自动化优先</strong> - 尽可能自动化重复任务</li></ul><h4>技术实践</h4><ul><li><strong>持续集成(CI)</strong> - 频繁合并代码并自动构建测试</li><li><strong>持续部署(CD)</strong> - 自动化部署到生产环境</li><li><strong>基础设施即代码(IaC)</strong> - 使用代码管理基础设施</li></ul><h4>工具链</h4><ul><li><strong>版本控制</strong> - Git, GitHub, GitLab</li><li><strong>CI/CD工具</strong> - Jenkins, GitLab CI, GitHub Actions, CircleCI</li><li><strong>配置管理</strong> - Ansible, Puppet, Chef</li><li><strong>容器化</strong> - Docker, Kubernetes</li></ul><h4>监控与反馈</h4><ul><li><strong>日志管理</strong> - ELK Stack, Splunk</li><li><strong>监控告警</strong> - Prometheus, Grafana, Datadog</li><li><strong>性能分析</strong> - New Relic, AppDynamics</li></ul><p>DevOps实践能够显著提高软件交付的效率和质量，帮助组织更快地响应市场需求。</p>",
                        date: "2025-11-12",
                        views: 7230,
                        likes: 489,
                        trending: true,
                        newest: false,
                        tags: ["DevOps", "CI/CD", "自动化", "Docker", "Kubernetes"]
                    }
                ],
                users: [
                    { id: 1, username: "admin", email: "admin@example.com", password: "admin123", role: "admin", status: true, registerDate: "2025-01-15" },
                    { id: 2, username: "editor1", email: "editor1@example.com", password: "editor123", role: "editor", status: true, registerDate: "2025-02-20" },
                    { id: 3, username: "viewer1", email: "viewer1@example.com", password: "viewer123", role: "viewer", status: true, registerDate: "2025-03-10" },
                    { id: 4, username: "editor2", email: "editor2@example.com", password: "editor123", role: "editor", status: false, registerDate: "2025-04-05" }
                ],
                statistics: {
                    totalKnowledge: 8,
                    totalCategories: 8,
                    totalViews: 62690,
                    totalLikes: 4441,
                    activeUsers: 6269,
                    lastUpdated: "2025-11-25"
                }
            };

            // 初始化界面
            updateStatistics();
            renderDashboard();
            renderKnowledgeTable();
            renderCategoriesGrid();
            renderUsersTable();
            populateCategoryOptions();
        }

        // 初始化界面
        function initializeUI() {
            // 设置当前日期
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('knowledgeDate').value = today;
        }

        // 初始化事件监听器
        function initializeEventListeners() {
            // 侧边栏导航
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    switchPage(page);
                });
            });

            // 登出按钮
            document.getElementById('logoutBtn').addEventListener('click', function() {
                showConfirmDialog('确认登出', '您确定要退出系统吗？', function() {
                    sessionStorage.removeItem('isLoggedIn');
                    window.location.href = 'login.html';
                });
            });

            // 添加知识按钮
            document.getElementById('addKnowledgeBtn').addEventListener('click', function() {
                openKnowledgeModal();
            });

            // 添加分类按钮
            document.getElementById('addCategoryBtn').addEventListener('click', function() {
                openCategoryModal();
            });

            // 添加用户按钮
            document.getElementById('addUserBtn').addEventListener('click', function() {
                openUserModal();
            });

            // 知识表单提交
            document.getElementById('knowledgeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveKnowledge();
            });

            // 分类表单提交
            document.getElementById('categoryForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveCategory();
            });

            // 用户表单提交
            document.getElementById('userForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveUser();
            });

            // 关闭知识模态框
            document.getElementById('closeKnowledgeModal').addEventListener('click', closeKnowledgeModal);
            document.getElementById('cancelKnowledgeBtn').addEventListener('click', closeKnowledgeModal);

            // 关闭分类模态框
            document.getElementById('closeCategoryModal').addEventListener('click', closeCategoryModal);
            document.getElementById('cancelCategoryBtn').addEventListener('click', closeCategoryModal);

            // 关闭用户模态框
            document.getElementById('closeUserModal').addEventListener('click', closeUserModal);
            document.getElementById('cancelUserBtn').addEventListener('click', closeUserModal);

            // 确认对话框按钮
            document.getElementById('confirmOk').addEventListener('click', function() {
                if (confirmCallback) {
                    confirmCallback();
                }
                closeConfirmDialog();
            });

            document.getElementById('confirmCancel').addEventListener('click', closeConfirmDialog);

            // 编辑器切换
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    switchEditorMode(mode);
                });
            });

            // 内容预览
            document.getElementById('knowledgeContent').addEventListener('input', function() {
                previewContent();
            });

            // 图标预览
            document.getElementById('categoryIcon').addEventListener('input', function() {
                updateIconPreview();
            });

            // 颜色预览
            document.getElementById('categoryColor').addEventListener('input', function() {
                updateColorPreview();
            });

            // 搜索知识
            document.getElementById('knowledgeSearch').addEventListener('input', function() {
                searchKnowledge(this.value);
            });

            // 搜索用户
            document.getElementById('userSearch').addEventListener('input', function() {
                searchUsers(this.value);
            });

            // 拖放上传区域
            const dropZone = document.getElementById('dropZone');
            dropZone.addEventListener('click', function() {
                document.getElementById('backupFile').click();
            });

            document.getElementById('backupFile').addEventListener('change', handleFileSelect);

            // 移除文件按钮
            document.getElementById('removeFileBtn').addEventListener('click', function() {
                document.getElementById('backupFile').value = '';
                document.getElementById('fileInfo').classList.add('hidden');
                document.getElementById('restoreBackupBtn').disabled = true;
            });

            // 恢复备份按钮
            document.getElementById('restoreBackupBtn').addEventListener('click', function() {
                showConfirmDialog('确认恢复', '恢复操作将覆盖当前所有数据，确定要继续吗？', function() {
                    showToast('success', '数据恢复成功！');
                });
            });

            // 创建备份按钮
            document.getElementById('createBackupBtn').addEventListener('click', function() {
                createBackup();
            });

            // 系统设置表单提交
            document.getElementById('generalSettingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveGeneralSettings();
            });

            document.getElementById('themeSettingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveThemeSettings();
            });

            document.getElementById('securitySettingsForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveSecuritySettings();
            });

            // 检查更新按钮
            document.getElementById('checkUpdateBtn').addEventListener('click', function() {
                showToast('info', '当前已是最新版本');
            });
        }

        // 切换页面
        function switchPage(page) {
            // 更新侧边栏激活状态
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`.sidebar-item[data-page="${page}"]`).classList.add('active');

            // 隐藏所有页面
            document.querySelectorAll('.page-content').forEach(content => {
                content.classList.add('hidden');
            });

            // 显示选中的页面
            document.getElementById(`${page}Page`).classList.remove('hidden');

            // 更新页面标题
            const pageTitles = {
                dashboard: '仪表盘',
                knowledge: '知识管理',
                categories: '分类管理',
                users: '用户管理',
                settings: '系统设置',
                backup: '数据备份'
            };
            document.getElementById('pageTitle').textContent = pageTitles[page];

            currentPage = page;
        }

        // 打开知识模态框
        function openKnowledgeModal(knowledgeId = null) {
            currentEditingId = knowledgeId;
            
            if (knowledgeId) {
                // 编辑模式
                const knowledge = knowledgeData.knowledge.find(item => item.id === knowledgeId);
                if (knowledge) {
                    document.getElementById('modalTitle').textContent = '编辑知识';
                    document.getElementById('knowledgeId').value = knowledge.id;
                    document.getElementById('knowledgeTitle').value = knowledge.title;
                    document.getElementById('knowledgeCategory').value = knowledge.category;
                    document.getElementById('knowledgeContent').value = knowledge.content;
                    document.getElementById('knowledgeDate').value = knowledge.date;
                    document.getElementById('knowledgeTags').value = knowledge.tags.join(', ');
                    
                    // 设置状态
                    document.querySelectorAll('input[name="knowledgeStatus"]').forEach(radio => {
                        radio.checked = radio.value === knowledge.status;
                    });
                    
                    // 预览内容
                    previewContent();
                }
            } else {
                // 新增模式
                document.getElementById('modalTitle').textContent = '添加知识';
                document.getElementById('knowledgeForm').reset();
                document.getElementById('knowledgeId').value = '';
                document.getElementById('knowledgeDate').value = new Date().toISOString().split('T')[0];
                document.getElementById('contentPreview').innerHTML = '';
            }

            document.getElementById('addKnowledgeModal').classList.remove('hidden');
            document.getElementById('addKnowledgeModal').classList.add('flex');
        }

        // 关闭知识模态框
        function closeKnowledgeModal() {
            document.getElementById('addKnowledgeModal').classList.add('hidden');
            document.getElementById('addKnowledgeModal').classList.remove('flex');
            currentEditingId = null;
        }

        // 打开分类模态框
        function openCategoryModal(categoryId = null) {
            currentEditingId = categoryId;
            
            if (categoryId) {
                // 编辑模式
                const category = knowledgeData.categories.find(item => item.id === categoryId);
                if (category) {
                    document.getElementById('categoryModalTitle').textContent = '编辑分类';
                    document.getElementById('categoryId').value = category.id;
                    document.getElementById('categoryName').value = category.name;
                    document.getElementById('categoryIcon').value = category.icon;
                    document.getElementById('categoryColor').value = category.color;
                    document.getElementById('categoryDescription').value = category.description;
                    
                    // 更新预览
                    updateIconPreview();
                    updateColorPreview();
                }
            } else {
                // 新增模式
                document.getElementById('categoryModalTitle').textContent = '添加分类';
                document.getElementById('categoryForm').reset();
                document.getElementById('categoryId').value = '';
                document.getElementById('categoryIcon').value = 'fa fa-book';
                document.getElementById('categoryColor').value = '#06b6d4';
                
                // 更新预览
                updateIconPreview();
                updateColorPreview();
            }

            document.getElementById('addCategoryModal').classList.remove('hidden');
            document.getElementById('addCategoryModal').classList.add('flex');
        }

        // 关闭分类模态框
        function closeCategoryModal() {
            document.getElementById('addCategoryModal').classList.add('hidden');
            document.getElementById('addCategoryModal').classList.remove('flex');
            currentEditingId = null;
        }

        // 打开用户模态框
        function openUserModal(userId = null) {
            currentEditingId = userId;
            
            if (userId) {
                // 编辑模式
                const user = knowledgeData.users.find(item => item.id === userId);
                if (user) {
                    document.getElementById('userModalTitle').textContent = '编辑用户';
                    document.getElementById('userId').value = user.id;
                    document.getElementById('userUsername').value = user.username;
                    document.getElementById('userEmail').value = user.email;
                    document.getElementById('userPassword').value = '';
                    document.getElementById('userConfirmPassword').value = '';
                    document.getElementById('userRole').value = user.role;
                    document.getElementById('userStatus').checked = user.status;
                }
            } else {
                // 新增模式
                document.getElementById('userModalTitle').textContent = '添加用户';
                document.getElementById('userForm').reset();
                document.getElementById('userId').value = '';
                document.getElementById('userStatus').checked = true;
            }

            document.getElementById('addUserModal').classList.remove('hidden');
            document.getElementById('addUserModal').classList.add('flex');
        }

        // 关闭用户模态框
        function closeUserModal() {
            document.getElementById('addUserModal').classList.add('hidden');
            document.getElementById('addUserModal').classList.remove('flex');
            currentEditingId = null;
        }

        // 保存知识
        function saveKnowledge() {
            const id = document.getElementById('knowledgeId').value;
            const title = document.getElementById('knowledgeTitle').value.trim();
            const category = document.getElementById('knowledgeCategory').value;
            const content = document.getElementById('knowledgeContent').value.trim();
            const date = document.getElementById('knowledgeDate').value;
            const tagsInput = document.getElementById('knowledgeTags').value.trim();
            const status = document.querySelector('input[name="knowledgeStatus"]:checked').value;

            if (!title || !category || !content) {
                showToast('error', '请填写所有必填字段');
                return;
            }

            const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()) : [];

            if (id) {
                // 编辑现有知识
                const index = knowledgeData.knowledge.findIndex(item => item.id === parseInt(id));
                if (index !== -1) {
                    knowledgeData.knowledge[index] = {
                        ...knowledgeData.knowledge[index],
                        title,
                        category,
                        content,
                        date,
                        tags,
                        status
                    };
                    showToast('success', '知识更新成功！');
                }
            } else {
                // 添加新知识
                const newId = knowledgeData.knowledge.length > 0 
                    ? Math.max(...knowledgeData.knowledge.map(item => item.id)) + 1 
                    : 1;

                const newKnowledge = {
                    id: newId,
                    title,
                    category,
                    content,
                    date,
                    views: 0,
                    likes: 0,
                    trending: false,
                    newest: true,
                    tags,
                    status
                };

                knowledgeData.knowledge.unshift(newKnowledge);
                knowledgeData.statistics.totalKnowledge++;
                showToast('success', '知识添加成功！');
            }

            closeKnowledgeModal();
            updateStatistics();
            renderKnowledgeTable();
            renderDashboard();
        }

        // 保存分类
        function saveCategory() {
            const id = document.getElementById('categoryId').value;
            const name = document.getElementById('categoryName').value.trim();
            const icon = document.getElementById('categoryIcon').value.trim();
            const color = document.getElementById('categoryColor').value;
            const description = document.getElementById('categoryDescription').value.trim();

            if (!name) {
                showToast('error', '请填写分类名称');
                return;
            }

            if (id) {
                // 编辑现有分类
                const index = knowledgeData.categories.findIndex(item => item.id === parseInt(id));
                if (index !== -1) {
                    const oldName = knowledgeData.categories[index].name;
                    
                    knowledgeData.categories[index] = {
                        ...knowledgeData.categories[index],
                        name,
                        icon,
                        color,
                        description
                    };

                    // 更新使用该分类的知识条目
                    knowledgeData.knowledge.forEach(item => {
                        if (item.category === oldName) {
                            item.category = name;
                        }
                    });

                    showToast('success', '分类更新成功！');
                }
            } else {
                // 添加新分类
                const newId = knowledgeData.categories.length > 0 
                    ? Math.max(...knowledgeData.categories.map(item => item.id)) + 1 
                    : 1;

                const newCategory = {
                    id: newId,
                    name,
                    icon,
                    color,
                    description,
                    count: 0
                };

                knowledgeData.categories.push(newCategory);
                knowledgeData.statistics.totalCategories++;
                showToast('success', '分类添加成功！');
            }

            closeCategoryModal();
            updateStatistics();
            renderCategoriesGrid();
            renderDashboard();
            populateCategoryOptions();
        }

        // 保存用户
        function saveUser() {
            const id = document.getElementById('userId').value;
            const username = document.getElementById('userUsername').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const password = document.getElementById('userPassword').value.trim();
            const confirmPassword = document.getElementById('userConfirmPassword').value.trim();
            const role = document.getElementById('userRole').value;
            const status = document.getElementById('userStatus').checked;

            if (!username || !email || !password) {
                showToast('error', '请填写所有必填字段');
                return;
            }

            if (password !== confirmPassword) {
                showToast('error', '密码和确认密码不匹配');
                return;
            }

            if (id) {
                // 编辑现有用户
                const index = knowledgeData.users.findIndex(item => item.id === parseInt(id));
                if (index !== -1) {
                    const updatedUser = {
                        ...knowledgeData.users[index],
                        username,
                        email,
                        role,
                        status
                    };

                    // 只有在密码不为空时才更新密码
                    if (password) {
                        updatedUser.password = password;
                    }

                    knowledgeData.users[index] = updatedUser;
                    showToast('success', '用户更新成功！');
                }
            } else {
                // 添加新用户
                const newId = knowledgeData.users.length > 0 
                    ? Math.max(...knowledgeData.users.map(item => item.id)) + 1 
                    : 1;

                const newUser = {
                    id: newId,
                    username,
                    email,
                    password,
                    role,
                    status,
                    registerDate: new Date().toISOString().split('T')[0]
                };

                knowledgeData.users.push(newUser);
                showToast('success', '用户添加成功！');
            }

            closeUserModal();
            renderUsersTable();
        }

        // 删除知识
        function deleteKnowledge(id) {
            showConfirmDialog('确认删除', '您确定要删除这条知识吗？此操作不可恢复。', function() {
                const index = knowledgeData.knowledge.findIndex(item => item.id === id);
                if (index !== -1) {
                    knowledgeData.knowledge.splice(index, 1);
                    knowledgeData.statistics.totalKnowledge--;
                    showToast('success', '知识删除成功！');
                    updateStatistics();
                    renderKnowledgeTable();
                    renderDashboard();
                }
            });
        }

        // 删除分类
        function deleteCategory(id) {
            // 检查是否有知识使用该分类
            const hasKnowledge = knowledgeData.knowledge.some(item => item.category === knowledgeData.categories.find(c => c.id === id)?.name);
            
            if (hasKnowledge) {
                showToast('error', '该分类下还有知识条目，请先删除相关知识或移动到其他分类');
                return;
            }

            showConfirmDialog('确认删除', '您确定要删除这个分类吗？此操作不可恢复。', function() {
                const index = knowledgeData.categories.findIndex(item => item.id === id);
                if (index !== -1) {
                    knowledgeData.categories.splice(index, 1);
                    knowledgeData.statistics.totalCategories--;
                    showToast('success', '分类删除成功！');
                    updateStatistics();
                    renderCategoriesGrid();
                    renderDashboard();
                    populateCategoryOptions();
                }
            });
        }

        // 删除用户
        function deleteUser(id) {
            // 不能删除管理员账户
            if (id === 1) {
                showToast('error', '不能删除管理员账户');
                return;
            }

            showConfirmDialog('确认删除', '您确定要删除这个用户吗？此操作不可恢复。', function() {
                const index = knowledgeData.users.findIndex(item => item.id === id);
                if (index !== -1) {
                    knowledgeData.users.splice(index, 1);
                    showToast('success', '用户删除成功！');
                    renderUsersTable();
                }
            });
        }

        // 渲染仪表盘
        function renderDashboard() {
            // 渲染分类图表
            renderCategoryChart();
            
            // 渲染最近更新
            renderRecentUpdates();
        }

        // 渲染分类图表
        function renderCategoryChart() {
            const categoryChart = document.getElementById('categoryChart');
            categoryChart.innerHTML = '';

            // 按知识数量排序
            const sortedCategories = [...knowledgeData.categories].sort((a, b) => b.count - a.count);

            sortedCategories.forEach(category => {
                const totalKnowledge = knowledgeData.knowledge.length;
                const percentage = totalKnowledge > 0 ? Math.round((category.count / totalKnowledge) * 100) : 0;

                const categoryItem = document.createElement('div');
                categoryItem.className = 'flex items-center justify-between';
                categoryItem.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${category.color}"></div>
                        <span>${category.name}</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-gray-400">${category.count} 条</span>
                        <div class="w-24 bg-gray-800 rounded-full h-1.5">
                            <div class="h-1.5 rounded-full" style="width: ${percentage}%; background-color: ${category.color}"></div>
                        </div>
                        <span class="text-sm font-medium">${percentage}%</span>
                    </div>
                `;
                categoryChart.appendChild(categoryItem);
            });
        }

        // 渲染最近更新
        function renderRecentUpdates() {
            const recentUpdates = document.getElementById('recentUpdates');
            recentUpdates.innerHTML = '';

            // 获取最近更新的5条知识
            const recentKnowledge = [...knowledgeData.knowledge]
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);

            recentKnowledge.forEach(item => {
                const category = knowledgeData.categories.find(c => c.name === item.category);
                const categoryColor = category ? category.color : '#9ca3af';

                const updateItem = document.createElement('div');
                updateItem.className = 'flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-800/50 transition-colors cursor-pointer';
                updateItem.innerHTML = `
                    <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0" style="background-color: ${categoryColor}20; color: ${categoryColor}">
                        <i class="fa fa-file-text-o"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h5 class="font-medium truncate">${item.title}</h5>
                        <div class="flex items-center text-xs text-gray-400 mt-1">
                            <span class="badge badge-primary" style="background-color: ${categoryColor}20; color: ${categoryColor}">${item.category}</span>
                            <span class="mx-2">•</span>
                            <span>${formatDate(item.date)}</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="text-primary hover:text-primary/80" onclick="openKnowledgeModal(${item.id})">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button class="text-danger hover:text-danger/80" onclick="deleteKnowledge(${item.id})">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                `;
                recentUpdates.appendChild(updateItem);
            });
        }

        // 渲染知识表格
        function renderKnowledgeTable(filter = '') {
            const tableBody = document.getElementById('knowledgeTableBody');
            tableBody.innerHTML = '';

            let filteredKnowledge = knowledgeData.knowledge;
            
            if (filter) {
                const searchTerm = filter.toLowerCase();
                filteredKnowledge = filteredKnowledge.filter(item => 
                    item.title.toLowerCase().includes(searchTerm) ||
                    item.category.toLowerCase().includes(searchTerm) ||
                    item.content.toLowerCase().includes(searchTerm) ||
                    item.tags.some(tag => tag.toLowerCase().includes(searchTerm))
                );
            }

            // 按ID降序排序
            filteredKnowledge.sort((a, b) => b.id - a.id);

            filteredKnowledge.forEach(item => {
                const category = knowledgeData.categories.find(c => c.name === item.category);
                const categoryColor = category ? category.color : '#9ca3af';
                const statusBadge = item.status === 'published' 
                    ? '<span class="badge badge-success">已发布</span>' 
                    : '<span class="badge badge-warning">草稿</span>';

                const row = document.createElement('tr');
                row.className = 'table-row border-b border-gray-800';
                row.innerHTML = `
                    <td class="py-3 px-4">${item.id}</td>
                    <td class="py-3 px-4">
                        <div class="flex items-center">
                            <div class="w-2 h-2 rounded-full mr-2" style="background-color: ${categoryColor}"></div>
                            <span class="font-medium">${item.title}</span>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <span class="badge badge-primary" style="background-color: ${categoryColor}20; color: ${categoryColor}">${item.category}</span>
                    </td>
                    <td class="py-3 px-4 text-gray-400">${formatDate(item.date)}</td>
                    <td class="py-3 px-4">${formatNumber(item.views)}</td>
                    <td class="py-3 px-4">${statusBadge}</td>
                    <td class="py-3 px-4 text-right">
                        <button class="text-primary hover:text-primary/80 mr-2" onclick="openKnowledgeModal(${item.id})">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button class="text-danger hover:text-danger/80" onclick="deleteKnowledge(${item.id})">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            // 更新分页信息
            updatePagination(filteredKnowledge.length);
        }

        // 渲染分类网格
        function renderCategoriesGrid() {
            const categoriesGrid = document.getElementById('categoriesGrid');
            categoriesGrid.innerHTML = '';

            knowledgeData.categories.forEach(category => {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'card rounded-xl p-6';
                categoryCard.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background-color: ${category.color}20; color: ${category.color}">
                                <i class="${category.icon} text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold">${category.name}</h4>
                                <p class="text-sm text-gray-400">${category.description || '暂无描述'}</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold" style="color: ${category.color}">${category.count}</div>
                            <div class="text-xs text-gray-400">知识条目</div>
                        </div>
                    </div>
                    <div class="flex justify-between items-center pt-4 border-t border-gray-800">
                        <div class="flex space-x-2">
                            <span class="text-xs px-2 py-1 bg-gray-800 rounded-full">
                                <i class="fa fa-tag mr-1"></i>
                                ${category.icon}
                            </span>
                            <span class="text-xs px-2 py-1 bg-gray-800 rounded-full">
                                <i class="fa fa-eyedropper mr-1"></i>
                                ${category.color}
                            </span>
                        </div>
                        <div class="flex space-x-2">
                            <button class="text-primary hover:text-primary/80" onclick="openCategoryModal(${category.id})">
                                <i class="fa fa-edit"></i>
                            </button>
                            <button class="text-danger hover:text-danger/80" onclick="deleteCategory(${category.id})">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                categoriesGrid.appendChild(categoryCard);
            });
        }

        // 渲染用户表格
        function renderUsersTable(filter = '') {
            const tableBody = document.getElementById('usersTableBody');
            tableBody.innerHTML = '';

            let filteredUsers = knowledgeData.users;
            
            if (filter) {
                const searchTerm = filter.toLowerCase();
                filteredUsers = filteredUsers.filter(item => 
                    item.username.toLowerCase().includes(searchTerm) ||
                    item.email.toLowerCase().includes(searchTerm) ||
                    item.role.toLowerCase().includes(searchTerm)
                );
            }

            // 按ID降序排序
            filteredUsers.sort((a, b) => b.id - a.id);

            filteredUsers.forEach(user => {
                const roleBadge = user.role === 'admin' 
                    ? '<span class="badge badge-danger">管理员</span>' 
                    : user.role === 'editor' 
                        ? '<span class="badge badge-primary">编辑</span>' 
                        : '<span class="badge badge-success">查看者</span>';

                const statusBadge = user.status 
                    ? '<span class="badge badge-success">启用</span>' 
                    : '<span class="badge badge-danger">禁用</span>';

                const row = document.createElement('tr');
                row.className = 'table-row border-b border-gray-800';
                row.innerHTML = `
                    <td class="py-3 px-4">${user.id}</td>
                    <td class="py-3 px-4">
                        <div class="flex items-center">
                            <div class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center mr-3">
                                <span class="text-xs font-bold" style="color: ${user.id === 1 ? '#ef4444' : '#06b6d4'}">${user.username.charAt(0).toUpperCase()}</span>
                            </div>
                            <div>
                                <span class="font-medium">${user.username}</span>
                                ${user.id === 1 ? '<span class="ml-2 text-xs text-danger">系统管理员</span>' : ''}
                            </div>
                        </div>
                    </td>
                    <td class="py-3 px-4 text-gray-400">${user.email}</td>
                    <td class="py-3 px-4">${roleBadge}</td>
                    <td class="py-3 px-4 text-gray-400">${formatDate(user.registerDate)}</td>
                    <td class="py-3 px-4">${statusBadge}</td>
                    <td class="py-3 px-4 text-right">
                        <button class="text-primary hover:text-primary/80 mr-2" onclick="openUserModal(${user.id})">
                            <i class="fa fa-edit"></i>
                        </button>
                        <button class="text-danger hover:text-danger/80" onclick="deleteUser(${user.id})">
                            <i class="fa fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            // 更新分页信息
            updateUsersPagination(filteredUsers.length);
        }

        // 填充分类选项
        function populateCategoryOptions() {
            const select = document.getElementById('knowledgeCategory');
            select.innerHTML = '<option value="">请选择分类</option>';

            knowledgeData.categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;
                select.appendChild(option);
            });
        }

        // 切换编辑器模式
        function switchEditorMode(mode) {
            const editorTabs = document.querySelectorAll('.editor-tab');
            const contentTextarea = document.getElementById('knowledgeContent');
            const contentPreview = document.getElementById('contentPreview');

            editorTabs.forEach(tab => {
                tab.classList.remove('active');
                tab.classList.add('text-gray-400');
            });

            document.querySelector(`.editor-tab[data-mode="${mode}"]`).classList.add('active');
            document.querySelector(`.editor-tab[data-mode="${mode}"]`).classList.remove('text-gray-400');

            if (mode === 'editor') {
                contentTextarea.classList.remove('hidden');
                contentPreview.classList.add('hidden');
            } else {
                contentTextarea.classList.add('hidden');
                contentPreview.classList.remove('hidden');
                previewContent();
            }
        }

        // 预览内容
        function previewContent() {
            const content = document.getElementById('knowledgeContent').value;
            const preview = document.getElementById('contentPreview');
            preview.innerHTML = content || '<p class="text-gray-400">没有内容可预览</p>';
        }

        // 更新图标预览
        function updateIconPreview() {
            const iconClass = document.getElementById('categoryIcon').value;
            const iconPreview = document.getElementById('iconPreview');
            
            // 移除所有fa类
            iconPreview.className = '';
            // 添加新的图标类
            iconPreview.className = `${iconClass} text-primary text-xl`;
        }

        // 更新颜色预览
        function updateColorPreview() {
            const color = document.getElementById('categoryColor').value;
            const colorPreview = document.getElementById('colorPreview');
            colorPreview.style.backgroundColor = color;
        }

        // 搜索知识
        function searchKnowledge(term) {
            renderKnowledgeTable(term);
        }

        // 搜索用户
        function searchUsers(term) {
            renderUsersTable(term);
        }

        // 处理文件选择
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                document.getElementById('fileName').textContent = file.name;
                document.getElementById('fileSize').textContent = formatFileSize(file.size);
                document.getElementById('fileInfo').classList.remove('hidden');
                document.getElementById('restoreBackupBtn').disabled = false;
            }
        }

        // 创建备份
        function createBackup() {
            const backupName = document.getElementById('backupName').value.trim();
            const backupDescription = document.getElementById('backupDescription').value.trim();

            if (!backupName) {
                showToast('error', '请输入备份名称');
                return;
            }

            // 创建备份数据
            const backupData = {
                metadata: {
                    name: backupName,
                    description: backupDescription,
                    date: new Date().toISOString(),
                    version: '1.0',
                    systemVersion: 'v1.0.0'
                },
                data: knowledgeData
            };

            // 转换为JSON字符串
            const jsonString = JSON.stringify(backupData, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            // 创建下载链接
            const a = document.createElement('a');
            a.href = url;
            a.download = `${backupName}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast('success', '备份创建成功！');
        }

        // 保存通用设置
        function saveGeneralSettings() {
            showToast('success', '通用设置保存成功！');
        }

        // 保存主题设置
        function saveThemeSettings() {
            showToast('success', '主题设置保存成功！');
        }

        // 保存安全设置
        function saveSecuritySettings() {
            showToast('success', '安全设置保存成功！');
        }

        // 更新统计数据
        function updateStatistics() {
            document.getElementById('statKnowledge').textContent = knowledgeData.statistics.totalKnowledge;
            document.getElementById('statCategories').textContent = knowledgeData.statistics.totalCategories;
            document.getElementById('statViews').textContent = formatNumber(knowledgeData.statistics.totalViews);
            document.getElementById('statUsers').textContent = formatNumber(knowledgeData.statistics.activeUsers);
        }

        // 更新分页信息
        function updatePagination(totalItems) {
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('showingFrom').textContent = totalItems > 0 ? '1' : '0';
            document.getElementById('showingTo').textContent = Math.min(10, totalItems);
        }

        // 更新用户分页信息
        function updateUsersPagination(totalItems) {
            document.getElementById('totalUsers').textContent = totalItems;
            document.getElementById('usersShowingFrom').textContent = totalItems > 0 ? '1' : '0';
            document.getElementById('usersShowingTo').textContent = Math.min(10, totalItems);
        }

        // 显示确认对话框
        function showConfirmDialog(title, message, callback) {
            document.getElementById('confirmTitle').textContent = title;
            document.getElementById('confirmMessage').textContent = message;
            confirmCallback = callback;
            
            document.getElementById('confirmDialog').classList.remove('hidden');
            document.getElementById('confirmDialog').classList.add('flex');
        }

        // 关闭确认对话框
        function closeConfirmDialog() {
            document.getElementById('confirmDialog').classList.add('hidden');
            document.getElementById('confirmDialog').classList.remove('flex');
            confirmCallback = null;
        }

        // 显示提示框
        function showToast(type, message) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');

            // 设置图标和颜色
            if (type === 'success') {
                toastIcon.className = 'fa fa-check-circle text-success mr-3';
                toastMessage.className = 'font-medium text-success';
            } else if (type === 'error') {
                toastIcon.className = 'fa fa-times-circle text-danger mr-3';
                toastMessage.className = 'font-medium text-danger';
            } else if (type === 'warning') {
                toastIcon.className = 'fa fa-exclamation-triangle text-warning mr-3';
                toastMessage.className = 'font-medium text-warning';
            } else {
                toastIcon.className = 'fa fa-info-circle text-primary mr-3';
                toastMessage.className = 'font-medium text-primary';
            }

            toastMessage.textContent = message;

            // 显示提示框
            toast.classList.add('show');

            // 3秒后隐藏
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // 格式化日期
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('zh-CN', { year: 'numeric', month: '2-digit', day: '2-digit' });
        }

        // 格式化数字
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // 格式化文件大小
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>